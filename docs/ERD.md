# ğŸ“Œ ì—”í„°í‹° ê°„ ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨ (N:N)

## ğŸ”· ì—”í„°í‹° ì •ì˜
- **Category**
  - **ì†ì„±:**
    - `name`: ì¹´í…Œê³ ë¦¬ì˜ ì´ë¦„ (ê³ ìœ , ì¤‘ë³µ ë¶ˆê°€)
    - `red`: ìƒ‰ìƒ(RGB)ì—ì„œ ë¹¨ê°„ìƒ‰ êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)
    - `green`: ìƒ‰ìƒ(RGB)ì—ì„œ ì´ˆë¡ìƒ‰ êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)
    - `blue`: ìƒ‰ìƒ(RGB)ì—ì„œ íŒŒë€ìƒ‰ êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)
  - **ê´€ê³„:**
    - `diaries`: ì—¬ëŸ¬ `Diary`ì™€ ì—°ê²° (ë‹¤ëŒ€ë‹¤ ê´€ê³„)

- **Diary**
  - **ì†ì„±:**
    - `title`: ë‹¤ì´ì–´ë¦¬ì˜ ì œëª©
    - `content`: ë‹¤ì´ì–´ë¦¬ì˜ ë‚´ìš©
    - `createdDate`: ìƒì„±ì¼
  - **ê´€ê³„:**
    - `categories`: ì—¬ëŸ¬ `Category`ì™€ ì—°ê²° (ë‹¤ëŒ€ë‹¤ ê´€ê³„)

---

## ğŸ”· ê´€ê³„ ì„¤ëª… (N:N)
- **N:N (ë‹¤ëŒ€ë‹¤) ê´€ê³„:**
  - ê° `Category`ëŠ” ì—¬ëŸ¬ `Diary`ì— ì—°ê²°ë  ìˆ˜ ìˆìœ¼ë©°, ê° `Diary`ë„ ì—¬ëŸ¬ `Category`ì— ì—°ê²°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ“Œ Category â†’ Diary:
- ê° ì¹´í…Œê³ ë¦¬ëŠ” ì—¬ëŸ¬ ë‹¤ì´ì–´ë¦¬ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì´ì–´ë¦¬ ì‚­ì œ ì‹œ í•´ë‹¹ ì°¸ì¡°ëŠ” **ë¬´íš¨í™”(nullify)** ë©ë‹ˆë‹¤.

### ğŸ“Œ Diary â†’ Category:
- ê° ë‹¤ì´ì–´ë¦¬ëŠ” ì—¬ëŸ¬ ì¹´í…Œê³ ë¦¬ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë©°, ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì‹œ í•´ë‹¹ ì°¸ì¡°ëŠ” **ë¬´íš¨í™”(nullify)** ë©ë‹ˆë‹¤.

---

## ğŸ”· ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨ (ERD)

```mermaid
+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+            +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+
|   Category    | *        * |    Diary      |
|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|<â€“â€“â€“â€“â€“----->|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
| - name        |            | - title       |
| - red         |            | - content     |
| - green       |            | - createdDate |
| - blue        |            |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|            | + categories  |
| + diaries     |            |               |
+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+            +â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+
```


---

## ğŸ”· ì‹¤ì œ ì½”ë“œ (SwiftData)

```swift
@Model
final class Category {
    /// ì¹´í…Œê³ ë¦¬ì˜ ê³ ìœ  ì´ë¦„ì„ ë‚˜íƒ€ë‚´ëŠ” ì†ì„±ì…ë‹ˆë‹¤.
    /// - Note: ê° ì¹´í…Œê³ ë¦¬ì˜ ì´ë¦„ì€ ì¤‘ë³µë  ìˆ˜ ì—†ìœ¼ë©°, ê³ ìœ í•´ì•¼ í•©ë‹ˆë‹¤.
    @Attribute(.unique) var name: String
    /// ì¹´í…Œê³ ë¦¬ì˜ ìƒ‰ìƒì—ì„œ ë¹¨ê°„ìƒ‰(Red) êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)ì…ë‹ˆë‹¤.
    private var red: Double
    /// ì¹´í…Œê³ ë¦¬ì˜ ìƒ‰ìƒì—ì„œ ì´ˆë¡ìƒ‰(Green) êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)ì…ë‹ˆë‹¤.
    private var green: Double
    /// ì¹´í…Œê³ ë¦¬ì˜ ìƒ‰ìƒì—ì„œ íŒŒë€ìƒ‰(Blue) êµ¬ì„± ìš”ì†Œ ê°’ (0 ~ 255)ì…ë‹ˆë‹¤.
    private var blue: Double

    /// ì¹´í…Œê³ ë¦¬ë¥¼ ì ìš©í•œ ë‹¤ì´ì–´ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì†ì„±ì…ë‹ˆë‹¤.
    /// - Note: ë‹¤ì´ì–´ë¦¬ê°€ ì‚­ì œë  ê²½ìš°, ì¹´í…Œê³ ë¦¬ì—ì„œ í•´ë‹¹ ë‹¤ì´ì–´ë¦¬ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë¬´íš¨í™”í•©ë‹ˆë‹¤. (nullify)
    @Relationship(deleteRule: .nullify) var diaries: [Diary] = []

    /// ì¹´í…Œê³ ë¦¬ì˜ ìƒ‰ìƒì„ ë°˜í™˜í•˜ëŠ” ê³„ì‚°ëœ ì†ì„±ì…ë‹ˆë‹¤.
    /// - Returns: RGB ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ Color ê°ì²´
    var color: Color {
        .init(r: red, g: green, b: blue)
    }

    /// ì¹´í…Œê³ ë¦¬ ëª¨ë¸ì˜ ì´ˆê¸°í™” ë©”ì„œë“œì…ë‹ˆë‹¤.
    /// - Parameters:
    ///   - name: ì¹´í…Œê³ ë¦¬ì˜ ê³ ìœ  ì´ë¦„
    ///   - red: ìƒ‰ìƒì˜ ë¹¨ê°„ìƒ‰(Red) ê°’ (0 ~ 255)
    ///   - green: ìƒ‰ìƒì˜ ì´ˆë¡ìƒ‰(Green) ê°’ (0 ~ 255)
    ///   - blue: ìƒ‰ìƒì˜ íŒŒë€ìƒ‰(Blue) ê°’ (0 ~ 255)
    init(name: String, red: Double = 0.0, green: Double = 0.0, blue: Double = 0.0) {
        self.name = name
        self.red = red
        self.green = green
        self.blue = blue
    }
    
    /// ì¹´í…Œê³ ë¦¬ ëª¨ë¸ì˜ í¸ì˜ ì´ˆê¸°í™” ë©”ì„œë“œì…ë‹ˆë‹¤.
    /// - Parameters:
    ///   - name: ì¹´í…Œê³ ë¦¬ì˜ ê³ ìœ  ì´ë¦„
    ///   - color: ì¹´í…Œê³ ë¦¬ì˜ ìƒ‰ìƒ (Color ê°ì²´)
    /// - Note: Color ê°ì²´ì—ì„œ RGB ê°’ì„ ì¶”ì¶œí•˜ì—¬ ê° êµ¬ì„± ìš”ì†Œ(red, green, blue)ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
    convenience init(name: String, color: Color) {
        let rgb = color.rgbComponents()
        self.init(name: name, red: rgb.red, green: rgb.green, blue: rgb.blue)
    }
}

@Model
final class Diary {
    /// ë‹¤ì´ì–´ë¦¬ì˜ ì œëª©ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì…ë‹ˆë‹¤.
    var title: String
    /// ë‹¤ì´ì–´ë¦¬ì˜ ë‚´ìš©ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì…ë‹ˆë‹¤.
    var contents: String
    /// ë‹¤ì´ì–´ë¦¬ì— ì—°ê²°ëœ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì…ë‹ˆë‹¤.
    /// - Note: ì¹´í…Œê³ ë¦¬ê°€ ì‚­ì œë  ê²½ìš°, ë‹¤ì´ì–´ë¦¬ì—ì„œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë¬´íš¨í™”í•©ë‹ˆë‹¤. (nullify)
    @Relationship(deleteRule: .nullify, inverse: \Category.diaries)
    var categories: [Category]
    /// ë‹¤ì´ì–´ë¦¬ ì‘ì„± ë‚ ì§œë¥¼ ë‚˜íƒ€ë‚´ëŠ” Date ê°ì²´ì…ë‹ˆë‹¤.
    var createdDate: Date

    /// Diary ëª¨ë¸ì˜ ì´ˆê¸°í™” ë©”ì„œë“œì…ë‹ˆë‹¤.
    /// - Parameters:
    ///   - title: ë‹¤ì´ì–´ë¦¬ì˜ ì œëª©
    ///   - contents: ë‹¤ì´ì–´ë¦¬ì˜ ë‚´ìš©
    ///   - categories: ë‹¤ì´ì–´ë¦¬ì— ì—°ê²°í•  ì¹´í…Œê³ ë¦¬ ëª©ë¡
    ///   - date: ë‹¤ì´ì–´ë¦¬ ì‘ì„± ë‚ ì§œ
    init(title: String, contents: String, categories: [Category], createdDate: Date = .now) {
        self.title = title
        self.contents = contents
        self.categories = categories
        self.createdDate = createdDate
    }
}
```
